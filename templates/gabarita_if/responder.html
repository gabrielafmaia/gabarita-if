{% extends "base.html" %} {% load static %} {% block content %}

<section>
  <div class="m-auto" style="max-width: 80rem">
    <div
      class="card mb-4 d-flex flex-column align-items-center"
      style="
        padding: 6rem;
        background-image: linear-gradient(to bottom right, var(--danger-color), var(--primary-dark));
        color: white !important;
      "
    >
      <h2 class="mt-4 mb-2 text-center fs-1 fw-bold">
        {{ simulado.titulo|default:prova.titulo }} {{ simulado.ano|default:prova.ano }}
      </h2>

      <p class="text-center fs-3" style="font-family: 'Caveat', cursive">
        {{ simulado.subtitulo|default:prova.instituicao }}
      </p>
    </div>

    <form method="POST">
      {% csrf_token %}

      <div class="d-flex flex-column gap-3">
        {% for object in objects %}
        <div class="col">
          <div class="card mb-3" style="background-color: var(--bs-white); padding: 32px">
            {% include "gabarita_if/partials/_questao_header.html" %}
            <div class="card-body">
              {% include "gabarita_if/partials/_questao_textos.html" %}
              <!-- ALTERNATIVAS -->
              {% for letra, texto in object.alternativas.items %}
              <div
                class="alternativa-container d-flex align-items-center rounded-lg mb-3 p-3"
                style="
                  {% if object.resposta %}
                    {% if letra == object.alternativa_correta %}
                      background-color: var(--primary-emphasis);
                    {% elif letra == object.resposta.alternativa_escolhida %}
                      background-color: var(--danger-emphasis);
                    {% endif %}
                  {% endif %}
                "
              >
                <div class="d-flex align-items-center gap-3 m-auto flex-grow-1">
                  <label class="fw-semibold">{{ letra }})</label>

                  <input type="radio" name="questao_{{ object.id }}" value="{{ letra }}" class="form-check-input
                  custom-radio" required {% if simulado.respondida or prova.respondida %}disabled{% endif %} 
                  {% if object.resposta and object.resposta.alternativa_escolhida == letra %} checked {% endif %} > 
                  {{ texto|safe }}
                </div>
              </div>
              {% endfor %} {% include "gabarita_if/partials/_questao_feedback.html" %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="form-btn d-flex gap-2 flex-column">
        <input
          type="submit"
          value="Finalizar"
          class="btn btn-primary btn-long w-100"
          {% if simulado.respondida or prova.respondida %}disabled{% endif %}
        />

        <!-- botÃ£o refazer -->
        {% if simulado.respondida or prova.respondida %}
          <input type="hidden" name="refazer" value="1" />
          <button class="btn w-100 btn-refazer" style="padding: 15px 30px;">Refazer</button>
        {% endif %}
      </div>
    </form>
  </div>
</section>
{% endblock %}
